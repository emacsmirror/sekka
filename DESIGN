
          Sekka DESIGN MEMO

Sekkaはモードレスなローマ字かな漢字変換エンジンです。
SKKにインスパイアされています。

1. 特徴

  1) Emacsの上で動き、次のようなインタフェースを持ちます。
     日本語変換モードというものはありません。
     いつでも[Ctrl-J]キーで、カーソルキーの直前のローマ字が変換可能です。
     Nihongo[Ctrl-J] で 日本語に変換されます。

  2) SKKの大文字小文字指定ルールが適用されます。
     OkonaU => 行う            に変換される。(送り仮名あり)
     okonaU => 行う            アルファベット中に大文字が1文字でもあれば漢字と見なされる
     okonau => おこなう        (全て平仮名)に変換される。
     Kanji  => 漢字,幹事       など、送り仮名なしの漢字に変換される

  3) ローマ字綴りミスはあいまい検索により、適度に救済されます。
     (Jaro-Winkler文字列類似度による検索)

  4) ローマ字の表記ゆれ、AZIK等の特殊ローマ字にも標準で対応します。(モード切替不要)


2. 辞書ファイルの構造 (Keyがアルファベット順にソートされるKVSを使う)

  1) アルファベット検索DB

           <key部>    <value部>

ルール    [a-z]+        E で始まる。ENDを表す
例         change       E change

ルール    [a-z]+        C で始まる。 (継続を表す)
例         henkan       C へんかん
例         hennkan      C へんかん
例         henkann      C へんかん
例         hennkann     C へんかん

ルール    [a-z]+[A-Z]   C で始まる   (継続を表す)
例         okoNau       C おこn

ルール    [あ-ん]+      E のみ記述されている
例         へんかん     E

ルール    [あ-ん]+[A-Z] E のみ記述されている
例         おこn        E



  2) 変換用DB
           <key部>    <value部>

ルール      任意     変換候補リスト   a/b/c/d/eのように '/'で候補を区切る
例         change        チェンジ    ;;英語                      => 日本語
例         へんかん      変換/返還   ;;ひらがな                  => 漢字
例         へんかんs     変換/返還   ;;ひらがな+送り仮名開始文字 => 送りあり漢字


  3) その他
   - SKKの辞書をSekkaの辞書に変換するツールで上記データベースのimport用データ(プレインテキスト)を作る。
   - Sekkaの辞書をロード時に上記２つのDBへの登録を行う
   - 変換用DBの構築時に辞書中に重複する key が出現した場合は、value部に変換候補を足し込む。


3. ユーザ辞書について
  ユーザ辞書はマスターDBとは別にもう1セット作る。
  辞書からの検索は同じキーがマスター辞書とユーザ辞書の両方にある場合は、ユーザー辞書を優先する。


[EOF]
